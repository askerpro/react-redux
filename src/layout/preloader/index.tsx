import React from 'react';
import * as E from './elements';
import ThemeProvider, { dark } from 'layout/theme';

interface Props {
  onPlayed?(): void;
}

interface State {
  isPlaying: boolean;
  display: boolean;
}

const animationDuration = 4000;
const disappearDuration = 700;

export default class extends React.Component<Props, State> {
  state = {
    isPlaying: true,
    display: true,
  };
  componentDidMount() {
    const { onPlayed } = this.props;
    setTimeout(() => {
      this.setState({ isPlaying: false });
    }, animationDuration);

    setTimeout(() => {
      this.setState({ display: false }, () => {
        onPlayed && onPlayed();
      });
    }, animationDuration + disappearDuration);
  }

  render() {
    const { isPlaying, display } = this.state;
    return (
      <ThemeProvider theme={dark}>
        <E.Wrapper isPlaying={isPlaying} display={display}>
          <E.LogoWrapper>
            <E.Logo xmlns="http://www.w3.org/2000/svg" viewBox="0 0 297.13 91.131">
              <g transform="scale(1 -1)">
                <g id="Spread" transform="translate(-6 -149.131)">
                  <g className="squares">
                    <path d="M 66.804,98.489 L 73.812,108.466 C 76.564,106.02 78.299,102.454 78.275,98.489 L 66.804,98.489 Z M 78.25,80.688 L 65.658,80.712 L 65.678,97.024 L 78.275,97.003 L 78.25,80.688 Z M 78.224,62.891 L 65.611,62.913 L 65.634,79.225 L 78.25,79.202 L 78.224,62.891 Z M 64.893,98.51 L 57.274,109.418 C 59.441,110.948 62.101,111.851 64.957,111.851 C 67.815,111.851 70.482,110.929 72.643,109.395 L 64.975,98.51 L 64.893,98.51 Z M 64.17,80.712 L 51.551,80.737 L 51.575,97.048 L 64.19,97.024 L 64.17,80.712 Z M 64.121,62.913 L 51.531,62.936 L 51.551,79.248 L 64.17,79.225 L 64.121,62.913 Z M 56.102,108.494 L 63.061,98.51 L 51.593,98.539 C 51.593,102.5 53.329,106.057 56.102,108.494 Z M 36.797,119.307 L 36.703,60.004 L 81.18,59.918 L 81.294,119.239 L 36.797,119.307 Z" />
                    <path d="M 36.727,77.895 L 24.599,77.895 L 24.696,131.609 L 63.696,131.545 L 63.674,119.264 L 66.446,119.264 L 66.488,134.087 L 21.99,134.179 L 21.901,74.852 L 36.727,74.83 Z" />
                    <path d="M 21.92,92.749 L 9.805,92.77 L 9.893,146.478 L 48.894,146.414 L 48.872,134.111 L 51.645,134.111 L 51.682,148.956 L 7.184,149.029 L 7.099,89.703 L 21.92,89.68 Z" />
                  </g>
                  <path
                    className="text"
                    d="M 91.006,60.231 L 91.117,119.491 L 103.848,119.473 C 106.439,119.473 108.464,119.377 110.001,119.148 C 111.506,118.95 112.861,118.591 114.031,118.112 C 117.278,116.783 119.777,114.849 121.513,112.343 C 123.247,109.868 124.105,106.938 124.081,103.606 C 124.081,100.832 123.565,98.469 122.528,96.527 C 121.49,94.57 119.979,93.102 117.979,92.092 C 120.879,91.238 123.184,89.567 124.867,87.088 C 126.535,84.609 127.372,81.66 127.372,78.255 C 127.372,75.48 126.851,72.895 125.82,70.46 C 124.779,68.024 123.363,66.02 121.53,64.425 C 119.708,62.891 117.681,61.809 115.431,61.157 C 113.172,60.525 109.973,60.212 105.877,60.212 L 91.006,60.231 Z M 102.183,70.64 L 105.672,70.64 C 109.212,70.618 111.802,71.224 113.447,72.394 C 115.116,73.568 115.949,75.391 115.949,77.855 C 115.949,80.557 115.091,82.584 113.357,83.977 C 111.623,85.353 109.078,86.055 105.717,86.055 L 102.203,86.076 L 102.183,70.64 Z M 102.225,95.633 L 103.58,95.633 C 106.778,95.602 109.161,96.193 110.723,97.34 C 112.292,98.489 113.105,100.219 113.105,102.524 C 113.105,104.748 112.363,106.394 110.881,107.455 C 109.393,108.513 107.067,109.034 103.915,109.053 L 102.25,109.053 L 102.225,95.633 Z M 165.604,59.87 L 133.635,59.909 L 133.73,119.169 L 165.722,119.102 L 165.697,108.693 L 145.193,108.736 L 145.172,95.219 L 165.677,95.169 L 165.655,84.918 L 145.149,84.963 L 145.129,70.322 L 165.632,70.275 L 165.604,59.87 Z M 186.901,60.209 L 175.298,60.234 L 175.415,119.491 L 189.492,119.467 C 193.951,119.443 197.292,119.284 199.476,118.97 C 201.659,118.659 203.503,118.138 205.065,117.444 C 208.42,115.864 210.993,113.655 212.747,110.839 C 214.508,107.999 215.38,104.709 215.38,100.898 C 215.356,96.305 214.093,92.423 211.552,89.254 C 209.048,86.055 205.602,84.026 201.254,83.193 L 216.038,60.164 L 202.199,60.188 L 186.944,87.725 L 186.901,60.209 Z M 186.944,90.652 L 189.515,90.652 C 194.205,90.652 197.761,91.481 200.193,93.174 C 202.631,94.867 203.845,97.342 203.845,100.583 C 203.872,103.742 202.853,106.059 200.805,107.568 C 198.795,109.053 195.594,109.804 191.297,109.824 L 186.996,109.824 L 186.944,90.652 Z M 252.263,119.445 L 252.242,109.012 L 241.09,109.037 L 241.026,60.208 L 229.462,60.231 L 229.526,109.059 L 218.379,109.084 L 218.403,119.491 L 252.263,119.445 Z M 262.848,72.354 L 258.242,59.934 L 246.222,59.959 L 269.322,119.173 L 279.327,119.173 L 301.91,59.868 L 289.464,59.89 L 284.825,72.301 L 262.848,72.354 Z M 281.017,83.301 L 274.054,102.409 L 266.863,83.33 L 281.017,83.301 Z"
                  />
                </g>
              </g>
            </E.Logo>
          </E.LogoWrapper>
        </E.Wrapper>
      </ThemeProvider>
    );
  }
}
